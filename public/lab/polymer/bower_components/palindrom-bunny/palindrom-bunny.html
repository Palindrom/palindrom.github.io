<!-- palindrom-bunny v3.0.0 | MIT License -->
<link rel="import" href="../polymer/polymer.html">
<dom-module id="palindrom-bunny">
    <template>
        <style>
            #stage {
                width: calc(100% - 106px);
                height: 145px;
                position: fixed;
                left: 53px;
                bottom: 5px;

                animation: stage 20s step-end;
                animation-iteration-count: infinite;
                transform-origin: bottom;
            }

            @keyframes stage {
                0%  { transform: translateZ(0) translateX(0); }
                10% { transform: translateZ(0) translateX(20%); }
                20% { transform: translateZ(0) translateX(40%); }
                30% { transform: translateZ(0) translateX(60%); }
                40% { transform: translateZ(0) translateX(80%); }
                50% { transform: translateZ(0) translateX(0)    rotateY(180deg); }
                60% { transform: translateZ(0) translateX(-20%) rotateY(180deg); }
                70% { transform: translateZ(0) translateX(-40%) rotateY(180deg); }
                80% { transform: translateZ(0) translateX(-60%) rotateY(180deg); }
                90% { transform: translateZ(0) translateX(-80%) rotateY(180deg); }
            }

            #jump {
                width: 20%;
                height: 145px;
                left: 0;
                bottom: 5px;

                animation: jump 2s;
                animation-timing-function: cubic-bezier(0.280, 0.840, 0.420, 1);
                animation-iteration-count: infinite;
                transform-origin: bottom;
            }

            @keyframes jump {
                0%   { transform: translateZ(0) translateX(0); }
                10%  { transform: translateZ(0) translateX(0); }
                50%  { transform: translateZ(0) translateX(100%); }
                100% { transform: translateZ(0) translateX(100%); }
            }
    
            #bunny {
                margin-left: -53px;
                width: 107px;
                height: 145px;

                animation: bunny 2s;
                animation-timing-function: cubic-bezier(0.280, 0.840, 0.420, 1);
                animation-iteration-count: infinite;
                transform-origin: bottom;
            }

            @keyframes bunny {
                0%   { transform: translateZ(0) scale(1,1)      translateY(0)      ; }
                10%  { transform: translateZ(0) scale(1.1,.9)   translateY(0)      ; }
                30%  { transform: translateZ(0) scale(.9,1.1)   translateY(-100px) ; }
                50%  { transform: translateZ(0) scale(1.05,.95) translateY(0)      ; }
                57%  { transform: translateZ(0) scale(1,1)      translateY(-7px)   ; }
                64%  { transform: translateZ(0) scale(1,1)      translateY(0)      ; }
                100% { transform: translateZ(0) scale(1,1)      translateY(0)      ; }
            }
        </style>
        <div id="stage">
            <div id="rotate">
                <div id="jump">
                    <img id="bunny" src$="{{imgsrc}}">
                </div>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'palindrom-bunny',
            properties: {
                imgsrc: {
                    type: String,
                    value: function() {return this.resolveUrl('src/puppet.png')}
                }
            }
        });
    </script>
</dom-module>
